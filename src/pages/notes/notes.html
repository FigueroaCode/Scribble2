<ion-header>
  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <h2 id="title"> Notes </h2>
  </ion-navbar>
</ion-header>
<ion-content class="background">
    <ion-grid *ngIf="isApp">
      <button ion-button (click)="createChapter()">Create Chapter</button>
      <ion-list>
        <ion-item *ngFor="let chapter of chapters | async" (click)="sendToNotes(chapter.chapterName, chapter.$key)" >
          {{ chapter.chapterName }}
          <ion-icon name="ios-exit-outline" item-end></ion-icon>
        </ion-item>
      </ion-list>
    </ion-grid>
    <ion-grid padding *ngIf="!isApp">
      <ion-segment [(ngModel)]="noteSegment">
        <ion-segment-button value="privateNote" (click)="privateNoteClicked()">
          Private Notes
        </ion-segment-button>
        <ion-segment-button value="publicNote" (click)="publicNoteClicked()">
          Public Notes
        </ion-segment-button>
      </ion-segment>

      <ion-row [ngSwitch]="noteSegment">
        <!-- PUBLIC NOTE -->
        <ion-col col-xs-12 col-sm-12 col-md-12 col-lg-12 *ngSwitchCase="'publicNote'">
          <!-- Choose a chapter area -->
          <ion-row>
            <div class="chapter-dropdown">
              <ion-row>
                <ion-col>
                  <h1 style="margin-top: 6px">Chapter: </h1>
                </ion-col>
                <ion-col>
                  <button ion-button (click)="toggleDropDown()" class="dropbutton">{{this.dropDownTitle}}</button>
                  <div id="chapterDropdown" class="chapter-dropdown-content">
                    <button (click)="showNote(chapter.$key, chapter.chapterName)" color="danger" ion-button full *ngFor="let chapter of chapters | async">
                        {{ chapter.chapterName }}
                    </button>
                  </div>
                </ion-col>
              </ion-row>
            </div>
            <ion-col col-xs-12 col-sm-12 col-md-3 col-lg-3>
              <button ion-button full (click)="createChapter()">CREATE CHAPTER</button>
            </ion-col>
          </ion-row>
          <ion-row row-xs-12 row-sm-12 row-md-12 row-lg-12>
            <ion-col col-xs-12 col-sm-12 col-md-12 col-lg-9>
              <ion-card style="height: 62vh">
                <ion-card-content>
                  <ion-textarea readonly websize [(ngModel)]="publicText" [value]="publicText"></ion-textarea>
                </ion-card-content>
              </ion-card>
            </ion-col>
            <ion-col col-xs-12 col-sm-12 col-md-12 col-lg-3>
              <!-- Change Log -->
              <ion-card style="height: 62vh">
                <ion-card-header class="bodyText" align="center" id="changeLog-Title">CHANGE LOG</ion-card-header>
                <ion-scroll style="width:100%;height:100%" scrollY="true">
                <ion-list scroll="true" *ngFor="let change of changeLog | async">
                  <ion-item text-wrap>
                    <ion-row>
                      <ion-col col-xs-2 col-sm-1 col-md-1 col-lg-2 col-xl-2>
                        <ion-row>
                          <button id="approveBtn" ion-button icon-only><ion-icon name="thumbs-up"></ion-icon></button>
                        </ion-row>
                        <ion-row>
                          <button id="disapproveBtn"ion-button icon-only><ion-icon name="thumbs-down"></ion-icon></button>
                        </ion-row>
                      </ion-col>
                      <ion-col col-xs-10 col-sm-11 col-md-11 col-lg-10 col-xl-10>
                        <div *ngIf="change.originalSentence != 'N/A'">
                          <p id="changeLog"><b>Would you like to replace: </b> {{ change.originalSentence }}</p>
                          <p id="changeLog"><b>With the following sentence: </b> {{ change.proposedSentence }}</p>
                        </div>
                        <p id="changeLog" *ngIf="change.originalSentence == 'N/A'"><b>Would you like to insert the following sentence: </b> {{ change.proposedSentence }}</p>
                      </ion-col>
                    </ion-row>
                  </ion-item>
                </ion-list>
                </ion-scroll>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-col>

        <!-- PRIVATE NOTE -->
        <ion-col col-xs-12 col-sm-12 col-md-12 col-lg-12 *ngSwitchCase="'privateNote'">
          <!-- Choose a chapter area -->
          <ion-row>
            <div class="chapter-dropdown">
              <ion-row>
                <ion-col>
                  <h1 style="margin-top: 6px">Chapter: </h1>
                </ion-col>
                <ion-col>
                  <button ion-button (click)="toggleDropDown()" class="dropbutton">{{this.dropDownTitle}}</button>
                  <div id="chapterDropdown" class="chapter-dropdown-content">
                    <button (click)="showNote(chapter.$key, chapter.chapterName)" color="danger" ion-button full *ngFor="let chapter of chapters | async">
                        {{ chapter.chapterName }}
                    </button>
                  </div>
                </ion-col>
              </ion-row>
            </div>
            <ion-col>
              <button ion-button full (click)="createChapter()">Create Chapter</button>
            </ion-col>
            <ion-col>
              <button ion-button full (click)="saveNote()">SAVE CHANGES</button>
            </ion-col>
            <ion-col>
              <button ion-button full (click)="prepareMerge()">SUBMIT CHANGES TO PUBLIC NOTE</button>
            </ion-col>
            <ion-col>
              <div id="inputOuterField">
                <button id="fakeInput" ion-button>
                  <ion-row row-xs-12 row-sm-12 row-md-3 row-lg-3>
                    <ion-input max="25" id="ionTextInput" readonly type="text" value="{{this.chosenFileName}}"></ion-input>
                    <ion-icon id="fileIcon" name="ios-folder-outline"></ion-icon>
                  </ion-row>
                </button>
                <input id="fileInput" type="file" #fileInput (change)="readSingleFile()">
              </div>
            </ion-col>
          </ion-row>
          <ion-row row-xs-12 row-sm-12 row-md-12 row-lg-12>
            <ion-col col-xs-12 col-sm-12 col-md-12 col-lg-12>
              <ion-card style="height: 62vh">
                <ion-card-content>
                  <ion-textarea websize [(ngModel)]="privateText" [value]="privateText"></ion-textarea>
                </ion-card-content>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-grid>
</ion-content>
